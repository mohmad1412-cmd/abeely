# ๐บ๏ธ ุฎุงุฑุทุฉ ุทุฑูู - ูุธุงู ุงูุฅุดุนุงุฑุงุช ูุงููุฑุงูุจุฉ ุงููุชูุฏู

## ๐ ุงูููุงู ุงููุทููุจุฉ

### โ ุงููุฑุญูุฉ 1: ูุธุงู ุชุชุจุน ุงููุฑุงุกุฉ (Request Views)
- [x] ุฅูุดุงุก ุฌุฏูู `request_views` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุฅูุดุงุก Functions ูุชุชุจุน ูุฑุงุกุฉ ุงูุทูุจุงุช
- [ ] ุฅูุดุงุก Service ููุชูุงุนู ูุน ูุธุงู ุงููุฑุงุกุฉ
- [ ] ุฑุจุท ูุธุงู ุงููุฑุงุกุฉ ุจูุชุญ ุตูุญุฉ RequestDetail

### โ ุงููุฑุญูุฉ 2: ูุธุงู ุงููุฑุงูุจุฉ ุงูุฐูู (Interests Only)
- [ ] ุชุนุฏูู `subscribeToNewRequests` ููููู ููุท ูุตูุญุฉ "ุงูุชูุงูุงุชู"
- [ ] ุฅุถุงูุฉ state ูููุตู ูุทูุจุงุช "ุงูุชูุงูุงุชู"
- [ ] ุฑุจุท ุงููุฑุงูุจุฉ ุจู `viewMode === "interests"`
- [ ] ุฅุถุงูุฉ ุนุฏุงุฏ ููุทูุจุงุช ุบูุฑ ุงูููุฑูุกุฉ ูู "ุงูุชูุงูุงุชู"

### โ ุงููุฑุญูุฉ 3: ุชุญุณูู ุงูุฅุดุนุงุฑุงุช (Professional Design)
- [ ] ุชุญุฏูุซ `Notification` type ูุฏุนู ุจูุงูุงุช ุฅุถุงููุฉ
- [ ] ุชุญุณูู ุตูุงุบุฉ ุงูุฅุดุนุงุฑุงุช (ุฃุณูุงุก ุญููููุฉุ ุนูุงูููุ ุฅูุฎ)
- [ ] ุฅุถุงูุฉ ุชุตููู ุงุญุชุฑุงูู ููุฅุดุนุงุฑุงุช
- [ ] ุฑุจุท ุงูุฅุดุนุงุฑุงุช ุจุงูุจูุงูุงุช ุงูุญููููุฉ (ุฃุณูุงุกุ ุนูุงูููุ ุฅูุฎ)

### โ ุงููุฑุญูุฉ 4: ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุฑุฌูุฉ (Push Notifications)
- [ ] ุฅุนุฏุงุฏ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุฑุฌูุฉ (ุนูุฏ ุงูุฎุฑูุฌ ูู ุงูุชุทุจูู)
- [ ] ุฑุจุท ุงูุฅุดุนุงุฑุงุช ุจู Supabase Functions
- [ ] ุฅุถุงูุฉ ุฏุนู Push Notifications (ูุงุญูุงู)

### โ ุงููุฑุญูุฉ 5: ุงูุชูุงูู ูุงูุงุฎุชุจุงุฑ
- [ ] ุงุฎุชุจุงุฑ ูุธุงู ุงููุฑุงูุจุฉ
- [ ] ุงุฎุชุจุงุฑ ูุธุงู ุงููุฑุงุกุฉ
- [ ] ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช
- [ ] ุชุญุณูู ุงูุฃุฏุงุก

---

## ๐ ุชูุงุตูู ูู ูุฑุญูุฉ

### ุงููุฑุญูุฉ 1: ูุธุงู ุชุชุจุน ุงููุฑุงุกุฉ

**ุงููุฏู:** ุชุชุจุน ุฅุฐุง ุดุงูุฏ ุงููุณุชุฎุฏู ุทูุจุงู ุฃู ูุง

**ุงูููููุงุช:**
1. ุฌุฏูู `request_views`:
   - `id` (UUID)
   - `user_id` (UUID) - ุงููุณุชุฎุฏู
   - `request_id` (UUID) - ุงูุทูุจ
   - `viewed_at` (TIMESTAMPTZ) - ููุช ุงููุดุงูุฏุฉ
   - `is_read` (BOOLEAN) - ูู ูุฑุฃ ุงูุทูุจ ุจุงููุงูู
   - `read_at` (TIMESTAMPTZ) - ููุช ุงููุฑุงุกุฉ ุงููุงููุฉ

2. Functions:
   - `mark_request_viewed(request_id)` - ุชุญุฏูุฏ ุงูุทูุจ ููุดุงูุฏ
   - `mark_request_read(request_id)` - ุชุญุฏูุฏ ุงูุทูุจ ูููุฑูุก
   - `get_unread_interests_count()` - ุนุฏุฏ ุงูุทูุจุงุช ุบูุฑ ุงูููุฑูุกุฉ ูู ุงูุชูุงูุงุชู

3. Service:
   - `markRequestAsViewed(requestId)`
   - `markRequestAsRead(requestId)`
   - `getUnreadInterestsCount()`

### ุงููุฑุญูุฉ 2: ูุธุงู ุงููุฑุงูุจุฉ ุงูุฐูู

**ุงููุฏู:** ูุฑุงูุจุฉ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ููุท ูุตูุญุฉ "ุงูุชูุงูุงุชู"

**ุงูููููุงุช:**
1. State ูููุตู:
   - `interestsRequests` - ูุงุฆูุฉ ุทูุจุงุช "ุงูุชูุงูุงุชู"
   - `unreadInterestsCount` - ุนุฏุฏ ุงูุทูุจุงุช ุบูุฑ ุงูููุฑูุกุฉ

2. Subscription:
   - ูุณุชูุน ููุท ููุทูุจุงุช ุงููุทุงุจูุฉ ูุงูุชูุงูุงุช ุงููุณุชุฎุฏู
   - ูุถูู ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ูู `interestsRequests`
   - ูุฒูุฏ `unreadInterestsCount` ุนูุฏ ุฅุถุงูุฉ ุทูุจ ุฌุฏูุฏ

3. Integration:
   - ุฑุจุท ุจู `Marketplace` component
   - ุชุญุฏูุซ ุงูุนุฏุงุฏ ูู ุฒุฑ "ุงูุชูุงูุงุชู"
   - ุฅุถุงูุฉ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุตูุญุฉ "ุงูุชูุงูุงุชู"

### ุงููุฑุญูุฉ 3: ุชุญุณูู ุงูุฅุดุนุงุฑุงุช

**ุงููุฏู:** ุฅุดุนุงุฑุงุช ุงุญุชุฑุงููุฉ ูุน ุฃุณูุงุก ุญููููุฉ ูุนูุงููู

**ุงูููููุงุช:**
1. ุชุญุฏูุซ Notification Type:
   ```typescript
   interface Notification {
     id: string;
     type: 'offer' | 'message' | 'status' | 'system' | 'interest';
     title: string;
     message: string;
     timestamp: Date;
     isRead: boolean;
     linkTo?: string;
     // ุจูุงูุงุช ุฅุถุงููุฉ
     relatedRequest?: {
       id: string;
       title: string;
       authorName?: string;
     };
     relatedOffer?: {
       id: string;
       title: string;
       providerName: string;
     };
     relatedMessage?: {
       id: string;
       senderName: string;
       preview: string;
     };
   }
   ```

2. ุชุญุณูู ุงูุตูุงุบุฉ:
   - **ุนุฑุถ ุฌุฏูุฏ:** "ุนุฑุถ ุฌุฏูุฏ ูู [ุงุณู ุงููุฒูุฏ] ุนูู ุทูุจู: [ุนููุงู ุงูุทูุจ]"
   - **ุฑุณุงูุฉ ุฌุฏูุฏุฉ:** "ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู [ุงุณู ุงููุฑุณู] ูู ูุญุงุฏุซุฉ: [ุนููุงู ุงูุทูุจ]"
   - **ุทูุจ ุฌุฏูุฏ ูู ุงูุชูุงูุงุชู:** "ุทูุจ ุฌุฏูุฏ ูุทุงุจู ุงูุชูุงูุงุชู: [ุนููุงู ุงูุทูุจ]"
   - **ูุจูู ุนุฑุถ:** "ุชู ูุจูู ุนุฑุถู ุนูู ุทูุจ: [ุนููุงู ุงูุทูุจ]"

3. ุชุตููู ุงุญุชุฑุงูู:
   - ุฃููููุงุช ููุงุณุจุฉ ููู ููุน
   - ุฃููุงู ูุฎุชููุฉ ุญุณุจ ุงูููุน
   - ุนุฑุถ ุงูุจูุงูุงุช ุงูุญููููุฉ (ุฃุณูุงุกุ ุนูุงููู)

### ุงููุฑุญูุฉ 4: ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุฑุฌูุฉ

**ุงููุฏู:** ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุฎุฑูุฌ ูู ุงูุชุทุจูู

**ุงูููููุงุช:**
1. Supabase Functions:
   - ุชุญุฏูุซ triggers ููุฌูุฏุฉ ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช
   - ุฏุนู Push Notifications (ูุงุญูุงู)

2. Service:
   - `subscribeToNotifications` (ููุฌูุฏ)
   - ุฅุถุงูุฉ ุฏุนู ููุฅุดุนุงุฑุงุช ุงูุฎุงุฑุฌูุฉ

---

## ๐ ุฎุทุฉ ุงูุชูููุฐ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุธุงู ุชุชุจุน ุงููุฑุงุกุฉ
1. ุฅูุดุงุก SQL schema ูู `request_views`
2. ุฅูุดุงุก Functions
3. ุฅูุดุงุก Service
4. ุฑุจุท ุจู RequestDetail component

### ุงูุฎุทูุฉ 2: ุชุนุฏูู ูุธุงู ุงููุฑุงูุจุฉ
1. ุชุนุฏูู `subscribeToNewRequests`
2. ุฅุถุงูุฉ state ูููุตู ูู App.tsx
3. ุฑุจุท ุจู Marketplace component
4. ุฅุถุงูุฉ ุนุฏุงุฏ ุบูุฑ ููุฑูุก

### ุงูุฎุทูุฉ 3: ุชุญุณูู ุงูุฅุดุนุงุฑุงุช
1. ุชุญุฏูุซ Notification type
2. ุชุญุฏูุซ notificationsService
3. ุชุญุฏูุซ triggers ูู Supabase
4. ุชุญุณูู UI ููุฅุดุนุงุฑุงุช

### ุงูุฎุทูุฉ 4: ุงูุชูุงูู ูุงูุงุฎุชุจุงุฑ
1. ุงุฎุชุจุงุฑ ูู ุงูููุฒุงุช
2. ุชุญุณูู ุงูุฃุฏุงุก
3. ุฅุตูุงุญ ุงูุฃุฎุทุงุก

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃุฏุงุก:** ุงุณุชุฎุฏุงู Realtime subscriptions ุจุญุฐุฑ ูุชุฌูุจ ุงูุญูู ุงูุฒุงุฆุฏ
2. **ุงูุฃูุงู:** ุงุณุชุฎุฏุงู RLS policies ููุชุฃูุฏ ูู ุงูุฃูุงู
3. **ุงูุชุฌุฑุจุฉ:** ุฅุดุนุงุฑุงุช ูุงุถุญุฉ ููููุฏุฉ ูููุณุชุฎุฏู
4. **ุงูุงุณุชูุฑุงุฑูุฉ:** ุงููุธุงู ูุฌุจ ุฃู ูุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู

---

## โ ุญุงูุฉ ุงูุชูููุฐ

- [ ] ุงููุฑุญูุฉ 1: ูุธุงู ุชุชุจุน ุงููุฑุงุกุฉ
- [ ] ุงููุฑุญูุฉ 2: ูุธุงู ุงููุฑุงูุจุฉ ุงูุฐูู
- [ ] ุงููุฑุญูุฉ 3: ุชุญุณูู ุงูุฅุดุนุงุฑุงุช
- [ ] ุงููุฑุญูุฉ 4: ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุฑุฌูุฉ
- [ ] ุงููุฑุญูุฉ 5: ุงูุชูุงูู ูุงูุงุฎุชุจุงุฑ

